// Generated by CoffeeScript 1.3.3
(function() {
  var app, express, models, port;

  express = require("express");

  models = require("./models");

  app = express();

  port = 3000;

  app.engine(".html", require("ejs").__express);

  app.set("views", __dirname + "/views");

  app.set("view engine", "html");

  app.use("/static", express["static"](__dirname + "/public"));

  app.use(express.bodyParser());

  app.get("/", function(req, res) {
    return res.render("index", {
      title: "Friendship League"
    });
  });

  app.get("/create", function(req, res) {
    return res.render("create", {
      title: "Create League"
    });
  });

  app.post("/create", function(req, res) {
    var league;
    console.log("create posted");
    league = {
      name: req.body.leagueName,
      description: req.body.description,
      email: req.body.email
    };
    return models.createLeague(league, function() {
      return res.send("ok");
    });
  });

  app.listen(port);

  console.log("Listening on port " + port);

}).call(this);
